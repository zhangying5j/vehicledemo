webpackJsonp([113],{DfXh:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n={components:{BaseTable:function(){return t.e(123).then(t.bind(null,"ss0d"))}},data:function(){return{showHistory:!1,taskManage:{org:"",channel:"",version:"",user:"",timeStart:"",timeEnd:""},rules:{org:[{required:!0,message:"请选择所属机构",trigger:"change"}],channel:[{required:!0,message:"请选择所属渠道",trigger:"change"}],version:[{required:!0,message:"请输入版本号",trigger:"blur"}],user:[{required:!0,message:"请输入编制人",trigger:"blur"}],timeStart:[{required:!0,message:"请输入生效时间",trigger:"change"}],timeEnd:[{required:!0,message:"请输入生效时间",trigger:"change"}]},inspect:{orgList:[{code:"01000",name:"北京分公司"},{code:"02000",name:"山东省分公司"},{code:"03000",name:"江苏省分公司"},{code:"04000",name:"黑龙江省分公司"},{code:"05000",name:"重庆市分公司"},{code:"06000",name:"河南省分公司"},{code:"07000",name:"上海市分公司"},{code:"08000",name:"广东省分公司"},{code:"09000",name:"深圳市分公司"},{code:"10000",name:"天津市分公司"},{code:"11000",name:"青岛分公司"},{code:"12000",name:"辽宁省分公司"},{code:"13000",name:"河北省分公司"},{code:"14000",name:"海南省分公司"},{code:"15000",name:"广西分公司"},{code:"16000",name:"湖南省分公司"},{code:"17000",name:"浙江省分公司"},{code:"18000",name:"贵州省分公司"},{code:"19000",name:"四川省分公司"},{code:"20000",name:"青海省分公司"},{code:"21000",name:"云南省分公司"},{code:"22000",name:"陕西省分公司"},{code:"23000",name:"湖北省分公司"},{code:"24000",name:"吉林省分公司"},{code:"25000",name:"新疆分公司"},{code:"26000",name:"宁波市分公司"},{code:"27000",name:"山西省分公司"},{code:"28000",name:"大连市分公司"},{code:"29000",name:"甘肃省分公司"},{code:"30000",name:"安徽省分公司"},{code:"31000",name:"江西省分公司"},{code:"32000",name:"福建省分公司"},{code:"33000",name:"内蒙古分公司"},{code:"34000",name:"厦门市分公司"},{code:"35000",name:"宁夏自治区分公司"},{code:"36000",name:"西藏自治区分公司"}],channel:[{code:"ct",name:"传统渠道",flag:0},{code:"org",name:"机构直管渠道",flag:1},{code:"vip",name:"重客渠道",flag:1},{code:"bank",name:"银保渠道",flag:1},{code:"agent",name:"经代渠道",flag:1},{code:"carIns",name:"车商渠道",flag:1},{code:"cross",name:"交叉销售渠道",flag:1},{code:"cn",name:"网电渠道",flag:0},{code:"tel",name:"电销渠道",flag:1},{code:"net",name:"网销渠道",flag:1},{code:"oat",name:"OAT",flag:1},{code:"mix",name:"融合渠道",flag:1}]},formInline:{user:"",region:""},dialogCloums:[{prop:"affilInstitutions",width:120,label:"所属机构",align:"center"},{prop:"channel",width:120,label:"所属渠道",align:"center"},{prop:"version",width:120,label:"版本号",align:"center"},{prop:"compactor",width:120,label:"编制人",align:"center"},{prop:"effectiveDate",width:220,label:"生效日期",align:"center"}],columns:[{prop:"affilInstitutions",width:120,label:"所属机构",align:"center"},{prop:"channel",width:120,label:"所属渠道",align:"center"},{prop:"version",width:120,label:"版本号",align:"center"},{prop:"compactor",width:120,label:"编制人",align:"center"},{prop:"effectiveDate",width:220,label:"生效日期",align:"center"},{prop:"operation",label:"操作",width:200,operation:!0,operations:[{text:"查看历史",event:"viewHistroy"},{text:"提交",event:"sub"}]}],data:[{id:"1",affilInstitutions:"0000001",channel:"网电",version:"100000010020",compactor:"章三",effectiveDate:"2014.04.23 - 2018.04.23"},{id:"2",affilInstitutions:"0000001",channel:"网电",version:"100000010020",compactor:"章三",effectiveDate:"2014.04.23 - 2018.04.23"},{id:"3",affilInstitutions:"0000001",channel:"网电",version:"100000010020",compactor:"章三",effectiveDate:"2014.04.23 - 2018.04.23"}],dialogData:[{id:"1",affilInstitutions:"0000001",channel:"网电",version:"100000010020",compactor:"章三",effectiveDate:"2014.04.23 - 2018.04.23"},{id:"2",affilInstitutions:"0000001",channel:"网电",version:"100000010020",compactor:"章三",effectiveDate:"2014.04.23 - 2018.04.23"},{id:"3",affilInstitutions:"0000001",channel:"网电",version:"100000010020",compactor:"章三",effectiveDate:"2014.04.23 - 2018.04.23"}]}},methods:{taskSubmit:function(e){var a=this;this.$refs[e].validate(function(e){if(!e)return!1;var t=a.inspect,n=t.orgList.find(function(e){return e.code===a.taskManage.org}),i=t.channel.find(function(e){return e.code===a.taskManage.channel});a.data.unshift({affilInstitutions:n.name,channel:i.name,version:a.taskManage.version,compactor:a.taskManage.user,effectiveDate:o(a.taskManage.timeStart)+" - "+o(a.taskManage.timeEnd)});for(var l=a.data.length,s=0;s<l;s++)return console.warn(a.data[s].affilInstitutions),a.data[s].affilInstitutions===n.name&&a.$notify.error({title:"错误",message:"不能重复提交"}),!1})},resetForm:function(e){this.$refs[e].resetFields()},sub:function(){this.$message({message:"已成功添加到上线任务队列中",type:"success"})}}};function o(e){var a=new Date(e);return a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate()}var i={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"container"},[t("div",{staticClass:"form"},[t("el-form",{ref:"taskManageForm",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.taskManage,rules:e.rules}},[t("el-form-item",{attrs:{"label-width":"120px",label:"所属机构",prop:"org"}},[t("el-select",{attrs:{placeholder:"所属机构"},model:{value:e.taskManage.org,callback:function(a){e.$set(e.taskManage,"org",a)},expression:"taskManage.org"}},e._l(e.inspect.orgList,function(e){return t("el-option",{key:e.code,attrs:{value:e.code,label:e.name}})}))],1),e._v(" "),t("el-form-item",{attrs:{"label-width":"120px",label:"所属渠道",prop:"channel"}},[t("el-select",{attrs:{placeholder:"所属渠道"},model:{value:e.taskManage.channel,callback:function(a){e.$set(e.taskManage,"channel",a)},expression:"taskManage.channel"}},e._l(e.inspect.channel,function(e){return t("el-option",{key:e.code,attrs:{value:e.code,label:e.name}})}))],1),e._v(" "),t("el-form-item",{attrs:{"label-width":"120px",label:"版本号",prop:"version"}},[t("el-input",{attrs:{placeholder:"版本号"},model:{value:e.taskManage.version,callback:function(a){e.$set(e.taskManage,"version",a)},expression:"taskManage.version"}})],1),e._v(" "),t("el-form-item",{attrs:{"label-width":"120px",label:"编制人",prop:"user"}},[t("el-input",{attrs:{placeholder:"编制人"},model:{value:e.taskManage.user,callback:function(a){e.$set(e.taskManage,"user",a)},expression:"taskManage.user"}})],1),e._v(" "),t("el-form-item",{attrs:{"label-width":"120px",label:"生效日期",prop:"timeStart"}},[t("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.taskManage.timeStart,callback:function(a){e.$set(e.taskManage,"timeStart",a)},expression:"taskManage.timeStart"}})],1),e._v(" "),t("el-form-item",{attrs:{"label-width":"120px",label:"生效日期",prop:"timeStart"}},[t("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.taskManage.timeEnd,callback:function(a){e.$set(e.taskManage,"timeEnd",a)},expression:"taskManage.timeEnd"}})],1)],1)],1),e._v(" "),t("div",{staticClass:"option"},[t("el-button",{attrs:{type:"primary",size:"small",plain:""},on:{click:function(a){e.resetForm("taskManageForm")}}},[e._v("重置")]),e._v(" "),t("el-button",{attrs:{type:"primary",size:"small",plain:""},on:{click:function(a){e.taskSubmit("taskManageForm")}}},[e._v("提交")])],1),e._v(" "),t("div",{staticClass:"data"},[t("base-table",{attrs:{columns:e.columns,data:e.data,pagination:!0,total:e.data.length},on:{viewHistroy:function(a){e.showHistory=!0},sub:e.sub}})],1),e._v(" "),t("el-dialog",{attrs:{title:"定价表版本上线历史清单",visible:e.showHistory,width:"80%"},on:{"update:visible":function(a){e.showHistory=a}}},[t("div",[t("base-table",{attrs:{columns:e.dialogCloums,data:e.dialogData,pagination:!0,total:e.data.length}})],1),e._v(" "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(a){e.showHistory=!1}}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:function(a){e.showHistory=!1}}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]},l=t("VU/8")(n,i,!1,null,null,null);a.default=l.exports}});